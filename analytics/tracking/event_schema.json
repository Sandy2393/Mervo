{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Mervo Event Schema",
  "type": "object",
  "required": ["event_type", "event_id", "timestamp_utc", "user", "company", "context", "properties"],
  "properties": {
    "event_type": {"type": "string"},
    "event_id": {"type": "string", "format": "uuid"},
    "timestamp_utc": {"type": "string", "format": "date-time"},
    "user": {
      "type": "object",
      "required": ["master_alias"],
      "properties": {
        "master_alias": {"type": "string"},
        "user_id": {"type": "string"}
      }
    },
    "company": {
      "type": "object",
      "required": ["company_id"],
      "properties": {
        "company_id": {"type": "string"},
        "company_tag": {"type": "string"}
      }
    },
    "context": {
      "type": "object",
      "required": ["app_version"],
      "properties": {
        "page": {"type": "string"},
        "path": {"type": "string"},
        "app_version": {"type": "string"},
        "device": {"type": "string"}
      }
    },
    "properties": {"type": "object"}
  },
  "examples": [
    {
      "event_type": "job.created",
      "event_id": "11111111-1111-4111-8111-111111111111",
      "timestamp_utc": "2024-01-01T12:00:00Z",
      "user": {"master_alias": "u_abc", "user_id": "user_1"},
      "company": {"company_id": "c1", "company_tag": "acme"},
      "context": {"page": "jobs", "path": "/jobs", "app_version": "1.0.0", "device": "web"},
      "properties": {"job_id": "j1", "title": "Fix sink"}
    },
    {
      "event_type": "job.assigned",
      "event_id": "22222222-2222-4222-8222-222222222222",
      "timestamp_utc": "2024-01-01T12:05:00Z",
      "user": {"master_alias": "u_mgr", "user_id": "manager_1"},
      "company": {"company_id": "c1", "company_tag": "acme"},
      "context": {"page": "jobs", "path": "/jobs/j1", "app_version": "1.0.0", "device": "web"},
      "properties": {"job_id": "j1", "assignee_id": "worker_1"}
    },
    {
      "event_type": "job.completed",
      "event_id": "33333333-3333-4333-8333-333333333333",
      "timestamp_utc": "2024-01-02T09:00:00Z",
      "user": {"master_alias": "worker_1", "user_id": "worker_1"},
      "company": {"company_id": "c1", "company_tag": "acme"},
      "context": {"page": "jobs", "path": "/jobs/j1", "app_version": "1.0.1", "device": "mobile"},
      "properties": {"job_id": "j1", "duration_minutes": 45}
    },
    {
      "event_type": "timesheet.clock_in",
      "event_id": "44444444-4444-4444-8444-444444444444",
      "timestamp_utc": "2024-01-02T08:00:00Z",
      "user": {"master_alias": "worker_1", "user_id": "worker_1"},
      "company": {"company_id": "c1"},
      "context": {"page": "timesheets", "path": "/timesheets", "app_version": "1.0.1", "device": "mobile"},
      "properties": {"job_id": "j1"}
    },
    {
      "event_type": "timesheet.clock_out",
      "event_id": "55555555-5555-4555-8555-555555555555",
      "timestamp_utc": "2024-01-02T09:00:00Z",
      "user": {"master_alias": "worker_1"},
      "company": {"company_id": "c1"},
      "context": {"app_version": "1.0.1", "device": "mobile"},
      "properties": {"job_id": "j1", "hours": 1}
    },
    {
      "event_type": "photo.uploaded",
      "event_id": "66666666-6666-4666-8666-666666666666",
      "timestamp_utc": "2024-01-02T09:05:00Z",
      "user": {"master_alias": "worker_1"},
      "company": {"company_id": "c1"},
      "context": {"app_version": "1.0.1", "device": "mobile"},
      "properties": {"job_id": "j1", "photo_id": "p1"}
    },
    {
      "event_type": "report.generated",
      "event_id": "77777777-7777-4777-8777-777777777777",
      "timestamp_utc": "2024-01-03T10:00:00Z",
      "user": {"master_alias": "u_mgr"},
      "company": {"company_id": "c1"},
      "context": {"app_version": "1.0.1", "device": "web"},
      "properties": {"report_id": "r1", "type": "job_summary"}
    },
    {
      "event_type": "payment.succeeded",
      "event_id": "88888888-8888-4888-8888-888888888888",
      "timestamp_utc": "2024-01-04T12:00:00Z",
      "user": {"master_alias": "billing_bot"},
      "company": {"company_id": "c1"},
      "context": {"app_version": "svc-1", "device": "server"},
      "properties": {"payment_id": "pay_1", "amount_cents": 15000, "currency": "USD"}
    },
    {
      "event_type": "payout.processed",
      "event_id": "99999999-9999-4999-8999-999999999999",
      "timestamp_utc": "2024-01-05T12:00:00Z",
      "user": {"master_alias": "billing_bot"},
      "company": {"company_id": "c1"},
      "context": {"app_version": "svc-1", "device": "server"},
      "properties": {"payout_id": "po_1", "amount_cents": 12000, "currency": "USD"}
    },
    {
      "event_type": "contractor.login",
      "event_id": "aaaaaaaa-aaaa-4aaa-8aaa-aaaaaaaaaaaa",
      "timestamp_utc": "2024-01-06T08:00:00Z",
      "user": {"master_alias": "worker_2", "user_id": "worker_2"},
      "company": {"company_id": "c2"},
      "context": {"app_version": "1.0.2", "device": "mobile"},
      "properties": {"auth_method": "password"}
    }
  ]
}
